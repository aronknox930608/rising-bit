format_version: 0.9.9
default_step_lib_source: https://github.com/bitrise-io/bitrise-steplib.git
app:
  envs:
  - BITRISE_PROJECT_TITLE: mytestproject
    opts:
      is_expand: true
  - BITRISE_DEV_BRANCH: master
    opts:
      is_expand: true
workflows:
  install-app-on-device:
    steps:
    - script:
        title: clone
        inputs:
        - content: |-
            #!/bin/bash
            if [ ! -d sample-apps-ios-with-bitrise-yml ] ; then
              git clone ${REPO_URL}
            else
              cd sample-apps-ios-with-bitrise-yml
              git pull
            fi
    - xcode-archive:
        inputs:
        - project_path: ./sample-apps-ios-with-bitrise-yml/BitriseSampleWithYML.xcodeproj
        - scheme: BitriseSampleWithYML
    - script:
        inputs:
        - content: |-
            #!/bin/bash
            brew install node
            npm install -g ios-deploy
            ios-deploy --debug --bundle ./sample-apps-ios-with-bitrise-yml/BitriseSampleWithYML.xcodeproj
    # - slack:
