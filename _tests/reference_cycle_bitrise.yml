format_version: 1.0.0
default_step_lib_source: "https://github.com/bitrise-io/bitrise-steplib.git"

app:
  envs:
  - BITRISE_PROJECT_TITLE: MyTit1
  - BITRISE_DEV_BRANCH: develop
    opts:
      is_expand: no

workflows:
  reference-cycle-test:
    before_run:
      - before1
      - before2
    after_run:
      - after
    steps:
      - script:
          title: Running the target script
          inputs:
            - content: |
                #!/bin/bash
                set -v
                echo 'This is a target step - target workflow'
      - https://github.com/bitrise-io/bitrise-steplib.git::timestamp-gen@1.0.0:

  before1:
    before_run:
      - before2
    steps:
      - script:
          title: Running the Before1 script
          inputs:
            - content: |
                #!/bin/bash
                set -v
                echo 'This is a before1 step - befor1 workflow'

  before2:
    before_run:
      - before1
    steps:
      - script:
          title: Running the Before2 script
          inputs:
            - content: |
                #!/bin/bash
                set -v
                echo 'This is a before2 step - befor2 workflow'

  after:
    envs: []
    steps:
      - script:
          title: Running the After script
          inputs:
            - content: |
                #!/bin/bash
                set -v
                echo 'This is a after step - after workflow'
